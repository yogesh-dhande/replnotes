{
  on_demand_tls {
    ask https://mysaas.com/api/allowed-domains
    interval 2m
    burst 5
  }
}


# For custom domains like yogesh.page
:443 {
  tls {
    on_demand
  }
  reverse_proxy user:8081
}

# For autogenerated user domains like yogesh.replnotes.com
*.replnotes.com {
  tls {
    on_demand
  }
  reverse_proxy user:8081
}


# For the main site
replnotes.com {
  tls {
    on_demand
  }
  reverse_proxy replnotes:8080
}

