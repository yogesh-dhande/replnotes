# {
#   on_demand_tls {
#     ask https://mysaas.com/api/allowed-domains
#     interval 2m
#     burst 5
#   }
# }


# For custom domains like yogesh.page
:443 {
  tls {
    on_demand
  }
  rewrite * /user{uri}
  reverse_proxy replnotes:8080
}

# For autogenerated user domains like yogesh.replnotes.com
*.tinywebapps.com {
  tls {
    on_demand
  }
  rewrite * /user{uri}
  reverse_proxy replnotes:8080
}


# For the main site
tinywebapps.com {
  tls {
    on_demand
  }
  rewrite * /admin{uri}
  reverse_proxy replnotes:8080
}

